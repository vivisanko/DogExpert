(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t){e.exports={links:[{path:"/",name:"main"},{path:"/settings",name:"settings"},{path:"/game",name:"game"}]}},31:function(e,t,n){e.exports=n(59)},37:function(e,t,n){},44:function(e,t,n){},46:function(e,t,n){},48:function(e,t,n){},50:function(e,t,n){},52:function(e,t,n){},57:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(23),o=n.n(c),l=n(6),i=n(24),s=n(25),u=n.n(s),m=n(5),d={list:{},loading:!1,error:null},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_DOGS_BEGIN":return Object(m.a)({},e,{loading:!0,error:null});case"GET_DOGS_SUCCESS":return Object(m.a)({},e,{loading:!1,list:t.result});case"GET_DOGS_FAIL":return Object(m.a)({},e,{loading:!1,error:t.error});default:return e}},p={name:"guest"},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_NAME":return Object(m.a)({},e,{name:t.name});default:return e}},h={size:4,loading:!1,error:null,source:[],score:0,selectedDogs:[]},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_NEW_GAME":return Object(m.a)({},e,{source:[],loading:!0,error:null});case"CREATE_GAME_SUCCESS":return Object(m.a)({},e,{loading:!1,source:t.result});case"CREATE_GAME_FAIL":return Object(m.a)({},e,{loading:!1,error:t.error});case"FINISH_GAME":var n=e.source.filter(function(e){return e.isActive}),a=e.source.slice();return n.forEach(function(e){a[e.id].isActive=!1}),Object(m.a)({},e,{score:t.score,source:a,selectedDogs:[]});case"NEXT_MOVE_GAME":var r=e.source.slice();return t.newInActiveDogs.forEach(function(e){r[e.id]=e}),Object(m.a)({},e,{source:r,selectedDogs:t.selectedDogs,score:t.score});default:return e}},v=Object(l.c)({dogs:f,user:g,game:E}),b=(n(37),n(14)),_=n(61),N=n(62),O=function(e,t){var n={},a={list:"https://dog.ceo/api/breeds/list/all",breed:"https://dog.ceo/api/breed/".concat(e,"/images"),subBreed:"https://dog.ceo/api/breed/".concat(e,"/images"),random:"https://dog.ceo/api/breeds/image/random/".concat(t),breedRandom:"https://dog.ceo/api/breed/".concat(e,"/images/random/").concat(t),subBreedRandom:"https://dog.ceo/api/breed/".concat(e,"/images/random/").concat(t)};return Object.keys(a).map(function(e){return n[e]=a[e],n}),n};function y(e){var t=e.source,n=e.exactly,a=e.amount;return O(n,a)[t]}var G=function(e){return{type:"GET_DOGS_BEGIN",query:e}},j=function(e,t){return{type:"GET_DOGS_SUCCESS",query:e,result:t}},A=function(e){return{type:"GET_DOGS_FAIL",error:e}};n(44);var S=n(63),x=function(){return r.a.createElement("div",null,"Hello")},C=n(7),k=n(8),D=n(10),w=n(9),M=n(11),I=n(12);n(46),n(48);function T(e){var t=e.id,n=e.value,a=e.handleChange,c=e.options,o=e.labelName,l=c.map(function(e){return r.a.createElement("option",{value:e.value,key:"".concat(e.value).concat(t)},e.text)});return r.a.createElement("label",{className:"BaseSelect",htmlFor:t},r.a.createElement("span",null,o),r.a.createElement("select",{className:"BaseSelect__options",id:t,value:n,onChange:a},l))}T.defaultProps={labelName:""};var F=[{value:4,text:"4x4"},{value:6,text:"6x6"},{value:10,text:"10x10"}],R=[{value:3,text:"beginner"},{value:4,text:"middle"},{value:5,text:"expert"}],z=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(D.a)(this,Object(w.a)(t).call(this,e))).handleChange=function(e){return n.setState(Object(I.a)({},e.target.id,e.target.value))},n.handleSubmit=function(){console.log("change settings")},n.state={name:"",size:4,complexity:3},n}return Object(M.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.name,a=t.size,c=t.complexity;return r.a.createElement("form",{className:"SettingsForm"},r.a.createElement("h3",null,"Preferences"),r.a.createElement("label",{className:"SettingsForm__preferencesElement",htmlFor:"name"},r.a.createElement("span",null,"name:"),r.a.createElement("input",{className:"SettingsForm__input",type:"text",id:"name",placeholder:"your name",value:n,onChange:this.handleChange})),r.a.createElement(T,{id:"size",value:+a,handleChange:function(t){return e.handleChange(t)},options:F,labelName:"select game size:"}),r.a.createElement(T,{id:"complexity",value:+c,handleChange:function(t){return e.handleChange(t)},options:R,labelName:"select game complexity:"}),r.a.createElement("div",null,r.a.createElement("button",{type:"button",onClick:this.handleSubmit},"Set preferences")))}}]),t}(a.Component),B=(n(50),function(e){function t(){return Object(C.a)(this,t),Object(D.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Settings"},r.a.createElement(z,null))}}]),t}(a.Component)),P=(n(52),n(27)),U=n.n(P),L=function(e){function t(){var e,n;Object(C.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(D.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).createNewGame=function(){var e=n.props,t=e.size,a=e.list;(0,e.createGame)(t,a)},n}return Object(M.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){this.createNewGame()}},{key:"render",value:function(){var e=this.props,t=e.source,n=e.selectDog,a=e.selectedDogs,c=e.game,o=t.map(function(e,t){var o=U()("Game__boxElem",{Game__boxElem_inactive:!e.isActive,Game__boxElem_selected:0!==a.length&&a[0].id===e.id});return r.a.createElement("div",{key:"".concat(e.image,"_").concat(t.toString()),className:o,role:"button",onClick:function(){return n(e,c)},onKeyUp:function(){},tabIndex:"-1"},r.a.createElement("img",{className:"Game__boxImage",src:e.image,alt:"dog"}))});return r.a.createElement("div",{className:"Game"},r.a.createElement("div",{className:"Game__moveDescription"},r.a.createElement("p",null,"Find dogs of the same breed"),r.a.createElement("p",null,r.a.createElement("span",{className:"Game__description"},"selected breed: "),0!==a.length?a[0].breed:"nothing selected"),r.a.createElement("p",null,r.a.createElement("span",{className:"Game__description"},"score: "),c.score),r.a.createElement("div",{className:"Game__navigation"},r.a.createElement("button",{type:"button",className:"Game__buttonNew",onClick:this.createNewGame},"Start another game"))),r.a.createElement("div",{className:"Game__area"},o))}}]),t}(a.Component),H=n(19),q=n.n(H),J=n(28),V=function(e){var t=Math.random()*e;return t=Math.floor(t)},W=function(e,t){var n=new Array(Math.pow(e,2)/2).fill(!0),a=[];return n.forEach(function(){var e=V(t.length);a.push(t[e])}),a},X=function(e){return e.flatMap(function(e){return e.message.map(function(t){return{breed:e.exactly,image:t}})})},K=function(e){var t=e;if(void 0!==e){for(var n=0;n<t.length;n+=1){var a=t[n],r=V(t.length);t[n]=t[r],t[r]=a}for(var c=0;c<t.length;c+=1)t[c].id=c,t[c].isActive=!0}return t},Q=function(e){return{type:"CREATE_GAME_SUCCESS",result:e}},Y=function(e,t,n){return{type:"NEXT_MOVE_GAME",selectedDogs:e,newInActiveDogs:t,score:n}},Z=function(e,t){return function(){var n=Object(J.a)(q.a.mark(function n(a){var r,c,o,l,i;return q.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(Object.keys(t).length>0)){n.next=18;break}return a({type:"CREATE_NEW_GAME"}),r=W(e,Object.keys(t)),c=r.map(function(e){return{source:"breedRandom",exactly:e,amount:2}}),o=c.map(function(e){return y(e)}),n.prev=5,n.next=8,Promise.all(o.map(function(e){return fetch(e).then(function(e){return e.json()}).then(function(e){return e}).catch(function(e){console.log("error",e)})}));case 8:n.sent.forEach(function(e,t){Object.assign(c[t],e)}),l=X(c),i=K(l),a(Q(i)),n.next=18;break;case 15:n.prev=15,n.t0=n.catch(5),a({type:"CREATE_GAME_FAIL",error:n.t0});case 18:case"end":return n.stop()}},n,this,[[5,15]])}));return function(e){return n.apply(this,arguments)}}()},$=function(e,t){return function(n){if(0===t.selectedDogs.length)return n(Y([e],[],t.score));var a=t.selectedDogs[0];if(e.breed!==a.breed||e.id===a.id)return n(Y([],[],t.score));var r=Object.assign({},a),c=Object.assign({},e);r.isActive=!1,c.isActive=!1;var o=t.score+2;return n(2===t.source.filter(function(e){return e.isActive}).length?{type:"FINISH_GAME",score:o}:Y([],[r,c],o))}};var ee=Object(b.b)(function(e){return{list:e.dogs.list,size:e.game.size,game:e.game,source:e.game.source,selectedDogs:e.game.selectedDogs}},function(e){return{createGame:function(t,n){return e(Z(t,n))},selectDog:function(t,n){return e($(t,n))}}})(function(e){return r.a.createElement(L,e)}),te=function(){return r.a.createElement(S.a,null,r.a.createElement(N.a,{path:"/game",exact:!0,component:ee}),r.a.createElement(N.a,{path:"/settings",component:B}),r.a.createElement(N.a,{path:"/",exact:!0,component:x}))},ne=(n(57),n(60));function ae(e){var t=e.links.map(function(e){return r.a.createElement("li",{className:"NavigationPanel__item",key:"".concat(e.path)},r.a.createElement(ne.a,{className:"NavigationPanel__link",to:e.path},e.name))});return r.a.createElement("nav",{className:"NavigationPanel"},r.a.createElement("ul",{className:"NavigationPanel__list"},t))}var re=n(30);function ce(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App__header"},r.a.createElement(ae,{links:re.links})),r.a.createElement("main",{className:"App__main"},r.a.createElement(te,null)),r.a.createElement("footer",{className:"App__footer"}))}var oe=function(e){var t,n=e.store;return n.dispatch((t={source:"list",exactly:"",amount:null},function(e){return e(G(t)),fetch(y(t)).then(function(e){return e.json()}).then(function(n){return e(j(t,n.message))}).catch(function(t){return console.log("err",t),e(A(t))})})),r.a.createElement(b.a,{store:n},r.a.createElement(_.a,null,r.a.createElement(N.a,{path:"/",component:ce})))},le=Object(l.d)(v,Object(l.a)(i.a,u.a));o.a.render(r.a.createElement(oe,{store:le}),document.getElementById("root"));t.default=le}},[[31,2,1]]]);
//# sourceMappingURL=main.48cb4a7b.chunk.js.map