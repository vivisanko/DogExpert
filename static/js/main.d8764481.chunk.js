(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e){e.exports={b:[{value:4,text:"small"},{value:6,text:"medium"},{value:10,text:"large"}],a:[{value:2,text:"beginner"},{value:4,text:"expert"}]}},32:function(e){e.exports={a:[{path:"/",name:"main"},{path:"/settings",name:"settings"},{path:"/game",name:"game"}]}},33:function(e,t,n){e.exports=n(61)},39:function(e,t,n){},46:function(e,t,n){},48:function(e,t,n){},50:function(e,t,n){},52:function(e,t,n){},54:function(e,t,n){},59:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(25),o=n.n(c),s=n(11),i=n(26),u=n(27),l=n.n(u),m=n(4),p={list:{},loading:!1,error:null},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_DOGS_LOADING":return Object(m.a)({},e,{loading:!0,error:null});case"GET_DOGS_SUCCESS":return Object(m.a)({},e,{loading:!1,list:t.result});case"GET_DOGS_FAIL":return Object(m.a)({},e,{loading:!1,error:t.error});default:return e}},g={name:""},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_NAME":return Object(m.a)({},e,{name:t.name});default:return e}},E=n(21),h={size:4,complexity:2,loading:!1,error:null,source:[],score:0,selectedDogs:[]},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_NEW_GAME":return Object(m.a)({},e,{source:[],selectedDogs:[],loading:!0,error:null});case"CREATE_GAME_SUCCESS":return Object(m.a)({},e,{loading:!1,source:t.result});case"CREATE_GAME_FAIL":return Object(m.a)({},e,{loading:!1,error:t.error});case"FINISH_GAME":var n=e.source.filter(function(e){return e.isActive}),a=Object(E.a)(e.source);return n.forEach(function(e){a[e.id].isActive=!1}),Object(m.a)({},e,{score:t.score,source:a,selectedDogs:[]});case"CHANGE_GAME_SETTINGS":return Object(m.a)({},e,{size:t.size,complexity:t.complexity});case"NEXT_MOVE_GAME":var r=Object(E.a)(e.source);return t.newInActiveDogs.forEach(function(e){r[e.id]=e}),Object(m.a)({},e,{source:r,selectedDogs:t.selectedDogs,score:t.score});default:return e}},b=Object(s.c)({dogs:f,user:d,game:v}),_=(n(39),n(12)),y=n(63),N=n(64),O=(n(46),n(65)),x=function(){return r.a.createElement("div",null,"Hello")},S=n(6),j=n(7),G=n(9),A=n(8),C=n(10),D=(n(48),n(13));n(50),n(52);function k(e){var t=e.name,n=e.value,a=e.handleChange,c=e.options,o=e.labelName,s=c.map(function(e){return r.a.createElement("option",{className:"BaseSelect__option",value:e.value,key:"".concat(e.value).concat(t)},e.text)});return r.a.createElement("label",{className:"BaseSelect",htmlFor:t},r.a.createElement("span",{className:"BaseSelect__description"},o),r.a.createElement("select",{className:"BaseSelect__select",name:t,value:n,onChange:a},s))}k.defaultProps={labelName:""};var w=n(19),M=function(e){function t(e){var n;return Object(S.a)(this,t),(n=Object(G.a)(this,Object(A.a)(t).call(this,e))).handleChange=function(e){return n.setState(Object(D.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){var t=n.state,a=t.name,r=t.size,c=t.complexity,o=n.props,s=o.changeSettings,i=o.changeName;s(+r,+c),i(a),e.preventDefault()},n.state={name:"",size:4,complexity:2},n.textInput=r.a.createRef(),n}return Object(C.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.name,n=e.size,a=e.complexity;this.setState({name:t,size:n,complexity:a}),""===t&&this.textInput.current.focus()}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.size,a=e.complexity;return r.a.createElement("form",{onSubmit:this.handleSubmit,className:"SettingsForm"},r.a.createElement("h3",null,"Preferences"),r.a.createElement("label",{className:"SettingsForm__preferencesElement",htmlFor:"name"},r.a.createElement("span",{className:"SettingsForm__description"},"name: "),r.a.createElement("input",{className:"SettingsForm__input",autoComplete:"off",type:"text",name:"name",placeholder:"your name",value:t,onChange:this.handleChange,ref:this.textInput})),r.a.createElement(k,{name:"size",value:+n,handleChange:this.handleChange,options:w.b,labelName:"size:"}),r.a.createElement(k,{name:"complexity",value:+a,handleChange:this.handleChange,options:w.a,labelName:"complexity:"}),r.a.createElement("div",null,r.a.createElement("input",{value:"Apply",className:"SettingsForm__button",type:"submit"})))}}]),t}(a.PureComponent),T=function(e){return{type:"CREATE_GAME_SUCCESS",result:e}},I=function(e,t){return{type:"CHANGE_GAME_SETTINGS",size:e,complexity:t}},z=function(e,t,n){return{type:"NEXT_MOVE_GAME",selectedDogs:e,newInActiveDogs:t,score:n}},F=function(e){return{type:"SET_USER_NAME",name:e}};var R=Object(_.b)(function(e){return{size:e.game.size,complexity:e.game.complexity,name:e.user.name}},function(e){return{changeSettings:function(t,n){return e(I(t,n))},changeName:function(t){return e(F(t))}}})(function(e){return r.a.createElement(M,e)}),P=function(e){function t(){return Object(S.a)(this,t),Object(G.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Settings"},r.a.createElement(R,null))}}]),t}(a.Component),B=(n(54),n(29)),L=n.n(B),U=function(e){function t(){return Object(S.a)(this,t),Object(G.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.createGame)()}},{key:"render",value:function(){var e=this.props,t=e.source,n=e.selectDog,a=e.selectedDogs,c=e.score,o=e.createGame,s=t.map(function(e,t){var c=L()("Game__boxElem",{Game__boxElem_inactive:!e.isActive,Game__boxElem_selected:0!==a.length&&a.some(function(t){return t.id===e.id})});return r.a.createElement("div",{key:"".concat(e.image,"_").concat(t.toString()),className:c,role:"button",onClick:function(){return n(e)},onKeyUp:function(){},tabIndex:"-1"},r.a.createElement("img",{className:"Game__boxImage",src:e.image,alt:"dog"}))});return r.a.createElement("div",{className:"Game"},r.a.createElement("div",{className:"Game__moveDescription"},r.a.createElement("p",null,"Find dogs of the same breed"),r.a.createElement("p",null,r.a.createElement("span",{className:"Game__description"},"breed: "),0!==a.length?a[0].breed:""),r.a.createElement("p",null,r.a.createElement("span",{className:"Game__description"},"score: "),c),r.a.createElement("div",{className:"Game__navigation"},r.a.createElement("button",{type:"button",className:"Game__buttonNew",onClick:o},"New game"))),r.a.createElement("div",{className:"Game__area"},s))}}]),t}(a.Component),H=n(20),q=n.n(H),J=n(30);function V(e){var t=e.source,n=e.exactly,a=e.amount;if("list"===t)return"https://dog.ceo/api/breeds/list/all";if("breed"===t||"subBreed"===t)return"https://dog.ceo/api/breed/".concat(n,"/images");if("random"===t)return"https://dog.ceo/api/breeds/image/random/".concat(a);if("breedRandom"===t||"subBreedRandom"===t)return"https://dog.ceo/api/breed/".concat(n,"/images/random/").concat(a);throw new Error("unknown source type: ".concat(t," "))}var W=function(e){var t=Math.random()*e;return t=Math.floor(t)},X=function(e,t,n){var a=new Array(Math.pow(e,2)/n).fill(!0),r=[];return a.forEach(function(){var e=W(t.length);r.push(t[e])}),r},K=function(e,t){return e.map(function(e){return{source:"breedRandom",exactly:e,amount:t}})},Q=function(e){return e.flatMap(function(e){return e.message.map(function(t){return{breed:e.exactly,image:t}})})},Y=function(e){var t=e;if(void 0!==e){for(var n=0;n<t.length;n+=1){var a=t[n],r=W(t.length);t[n]=t[r],t[r]=a}for(var c=0;c<t.length;c+=1)t[c].id=c,t[c].isActive=!0}return t};function Z(e){return fetch(e).then(function(e){return 200!==e.status&&Promise.reject(new Error(e.statusText)),e.json()})}var $=function(e){return{type:"GET_DOGS_LOADING",query:e}},ee=function(e,t){return{type:"GET_DOGS_SUCCESS",query:e,result:t}},te=function(e){return{type:"GET_DOGS_FAIL",error:e}};function ne(e){return function(t){return t($(e)),Z(V(e)).then(function(n){return t(ee(e,n.message)),n.message}).catch(function(e){return console.log("err",e),t(te(e)),[]})}}var ae=function(e,t,n){return function(){var a=Object(J.a)(q.a.mark(function a(r){var c,o,s,i,u,l;return q.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(c=e,a.prev=1,0!==Object.keys(e).length){a.next=8;break}return a.next=5,r(ne({source:"list",exactly:"",amount:null}));case 5:if(0!==(c=a.sent).length){a.next=8;break}throw new Error("no breeds found");case 8:return r({type:"CREATE_NEW_GAME"}),o=X(t,Object.keys(c),n),s=K(o,n),i=s.map(function(e){return V(e)}),a.next=14,Promise.all(i.map(function(e){return Z(e).then(function(e){return e}).catch(function(e){console.log("error",e)})}));case 14:a.sent.forEach(function(e,t){Object.assign(s[t],e)}),u=Q(s),l=Y(u),r(T(l)),a.next=24;break;case 21:a.prev=21,a.t0=a.catch(1),r({type:"CREATE_GAME_FAIL",error:a.t0});case 24:case"end":return a.stop()}},a,this,[[1,21]])}));return function(e){return a.apply(this,arguments)}}()},re=function(e,t){return function(n){if(0===t.selectedDogs.length)return n(z([e],[],t.score));var a=t.selectedDogs[0];if(e.breed!==a.breed||0!==t.selectedDogs.filter(function(t){return t.id===e.id}).length)return n(z([],[],t.score));var r=t.selectedDogs.length+1<t.complexity,c=t.selectedDogs.concat(e),o=r?c:[],s=r?[]:c,i=0;0!==s.length&&(s=s.map(function(e){return Object(m.a)({},e,{isActive:!1})}),i=t.complexity);var u=t.score+i;return n(0===t.source.filter(function(e){return e.isActive}).length?{type:"FINISH_GAME",score:u}:z(o,s,u))}},ce=function(e){function t(){return Object(S.a)(this,t),Object(G.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return r.a.createElement(U,this.props)}}]),t}(a.Component),oe={createGame:function(){return function(e,t){var n=t(),a=n.dogs.list,r=n.game,c=r.size,o=r.complexity;e(ae(a,c,o))}},selectDog:function(e){return function(t,n){var a=n().game;t(re(e,a))}},fetchDogsList:function(e){return function(t){return t(ne(e))}}},se=Object(_.b)(function(e){return{list:e.dogs.list,size:e.game.size,complexity:e.game.complexity,score:e.game.score,source:e.game.source,selectedDogs:e.game.selectedDogs}},oe)(ce),ie=function(){return r.a.createElement(O.a,null,r.a.createElement(N.a,{path:"/game",exact:!0,component:se}),r.a.createElement(N.a,{path:"/settings",component:P}),r.a.createElement(N.a,{path:"/",exact:!0,component:x}))},ue=(n(59),n(62));function le(e){var t=e.links.map(function(e){return r.a.createElement("li",{className:"NavigationPanel__item",key:"".concat(e.path)},r.a.createElement(ue.a,{className:"NavigationPanel__link",to:e.path},e.name))});return r.a.createElement("nav",{className:"NavigationPanel"},r.a.createElement("ul",{className:"NavigationPanel__list"},t))}var me=n(32);function pe(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App__header"},r.a.createElement(le,{links:me.a})),r.a.createElement("main",{className:"App__main"},r.a.createElement(ie,null)),r.a.createElement("footer",{className:"App__footer"}))}var fe=function(e){var t=e.store;return r.a.createElement(_.a,{store:t},r.a.createElement(y.a,{basename:"/DogExpert"},r.a.createElement(N.a,{path:"/",component:pe})))},ge=Object(s.d)(b,Object(s.a)(i.a,l.a));o.a.render(r.a.createElement(fe,{store:ge}),document.getElementById("root"));t.default=ge}},[[33,2,1]]]);
//# sourceMappingURL=main.d8764481.chunk.js.map