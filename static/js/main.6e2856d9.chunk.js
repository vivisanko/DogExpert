(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e){e.exports={b:[{value:4,text:"small"},{value:6,text:"medium"},{value:10,text:"large"}],a:[{value:2,text:"beginner"},{value:4,text:"expert"}]}},32:function(e){e.exports={a:[{path:"/",name:"main"},{path:"/settings",name:"settings"},{path:"/game",name:"game"}]}},33:function(e,t,n){e.exports=n(61)},39:function(e,t,n){},46:function(e,t,n){},48:function(e,t,n){},50:function(e,t,n){},52:function(e,t,n){},54:function(e,t,n){},59:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(25),o=n.n(c),i=n(11),s=n(26),l=n(27),u=n.n(l),m=n(4),p={list:{},loading:!1,error:null},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_DOGS_LOADING":return Object(m.a)({},e,{loading:!0,error:null});case"GET_DOGS_SUCCESS":return Object(m.a)({},e,{loading:!1,list:t.result});case"GET_DOGS_FAIL":return Object(m.a)({},e,{loading:!1,error:t.error});default:return e}},g={name:""},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_NAME":return Object(m.a)({},e,{name:t.name});default:return e}},h=n(21),E={size:4,complexity:2,loading:!1,error:null,source:[],score:0,selectedDogs:[]},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_NEW_GAME":return Object(m.a)({},e,{source:[],selectedDogs:[],loading:!0,error:null});case"CREATE_GAME_SUCCESS":return Object(m.a)({},e,{loading:!1,source:t.result});case"CREATE_GAME_FAIL":return Object(m.a)({},e,{loading:!1,error:t.error});case"FINISH_GAME":var n=e.source.filter(function(e){return e.isActive}),a=Object(h.a)(e.source);return n.forEach(function(e){a[e.id].isActive=!1}),Object(m.a)({},e,{score:t.score,source:a,selectedDogs:[]});case"CHANGE_GAME_SETTINGS":return Object(m.a)({},e,{size:t.size,complexity:t.complexity});case"NEXT_MOVE_GAME":var r=Object(h.a)(e.source);return t.newInActiveDogs.forEach(function(e){r[e.id]=e}),Object(m.a)({},e,{source:r,selectedDogs:t.selectedDogs,score:t.score});default:return e}},b=Object(i.c)({dogs:f,user:d,game:v}),_=(n(39),n(12)),y=n(63),O=n(64),N=(n(46),n(65)),x=function(){return r.a.createElement("div",null,"Hello")},G=n(6),j=n(7),S=n(9),A=n(8),C=n(10),D=(n(48),n(13));n(50),n(52);function w(e){var t=e.id,n=e.value,a=e.handleChange,c=e.options,o=e.labelName,i=c.map(function(e){return r.a.createElement("option",{value:e.value,key:"".concat(e.value).concat(t)},e.text)});return r.a.createElement("label",{className:"BaseSelect",htmlFor:t},r.a.createElement("span",null,o),r.a.createElement("select",{className:"BaseSelect__options",id:t,value:n,onChange:a},i))}w.defaultProps={labelName:""};var k=n(19),M=function(e){function t(){var e,n;Object(G.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(S.a)(this,(e=Object(A.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",size:4,complexity:2},n.handleChange=function(e){return n.setState(Object(D.a)({},e.target.id,e.target.value))},n.handleSubmit=function(){var e=n.state,t=e.name,a=e.size,r=e.complexity,c=n.props,o=c.changeSettings,i=c.changeName;o(+a,+r),i(t)},n}return Object(C.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.name,n=e.size,a=e.complexity;this.setState({name:t,size:n,complexity:a})}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.size,a=e.complexity;return r.a.createElement("form",{className:"SettingsForm"},r.a.createElement("h3",null,"Preferences"),r.a.createElement("label",{className:"SettingsForm__preferencesElement",htmlFor:"name"},r.a.createElement("span",null,"name:"),r.a.createElement("input",{className:"SettingsForm__input",type:"text",id:"name",placeholder:"your name",value:t,onChange:this.handleChange})),r.a.createElement(w,{id:"size",value:+n,handleChange:this.handleChange,options:k.b,labelName:"select game size:"}),r.a.createElement(w,{id:"complexity",value:+a,handleChange:this.handleChange,options:k.a,labelName:"select game complexity:"}),r.a.createElement("div",null,r.a.createElement("button",{className:"SettingsForm__button",type:"button",onClick:this.handleSubmit},"Set preferences")))}}]),t}(a.Component),T=function(e){return{type:"CREATE_GAME_SUCCESS",result:e}},I=function(e,t){return{type:"CHANGE_GAME_SETTINGS",size:e,complexity:t}},z=function(e,t,n){return{type:"NEXT_MOVE_GAME",selectedDogs:e,newInActiveDogs:t,score:n}},F=function(e){return{type:"SET_USER_NAME",name:e}};var R=Object(_.b)(function(e){return{size:e.game.size,complexity:e.game.complexity,name:e.user.name}},function(e){return{changeSettings:function(t,n){return e(I(t,n))},changeName:function(t){return e(F(t))}}})(function(e){return r.a.createElement(M,e)}),P=function(e){function t(){return Object(G.a)(this,t),Object(S.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Settings"},r.a.createElement(R,null))}}]),t}(a.Component),L=(n(54),n(29)),U=n.n(L),B=function(e){function t(){var e,n;Object(G.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(S.a)(this,(e=Object(A.a)(t)).call.apply(e,[this].concat(r)))).createNewGame=function(){(0,n.props.createGame)()},n}return Object(C.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){this.createNewGame()}},{key:"render",value:function(){var e=this.props,t=e.source,n=e.selectDog,a=e.selectedDogs,c=e.score,o=t.map(function(e,t){var c=U()("Game__boxElem",{Game__boxElem_inactive:!e.isActive,Game__boxElem_selected:0!==a.length&&a.some(function(t){return t.id===e.id})});return r.a.createElement("div",{key:"".concat(e.image,"_").concat(t.toString()),className:c,role:"button",onClick:function(){return n(e)},onKeyUp:function(){},tabIndex:"-1"},r.a.createElement("img",{className:"Game__boxImage",src:e.image,alt:"dog"}))});return r.a.createElement("div",{className:"Game"},r.a.createElement("div",{className:"Game__moveDescription"},r.a.createElement("p",null,"Find dogs of the same breed"),r.a.createElement("p",null,r.a.createElement("span",{className:"Game__description"},"selected breed: "),0!==a.length?a[0].breed:""),r.a.createElement("p",null,r.a.createElement("span",{className:"Game__description"},"score: "),c),r.a.createElement("div",{className:"Game__navigation"},r.a.createElement("button",{type:"button",className:"Game__buttonNew",onClick:this.createNewGame},"Start another game"))),r.a.createElement("div",{className:"Game__area"},o))}}]),t}(a.Component),H=n(20),q=n.n(H),J=n(30);function V(e){var t=e.source,n=e.exactly,a=e.amount;if("list"===t)return"https://dog.ceo/api/breeds/list/all";if("breed"===t||"subBreed"===t)return"https://dog.ceo/api/breed/".concat(n,"/images");if("random"===t)return"https://dog.ceo/api/breeds/image/random/".concat(a);if("breedRandom"===t||"subBreedRandom"===t)return"https://dog.ceo/api/breed/".concat(n,"/images/random/").concat(a);throw new Error("unknown source type: ".concat(t," "))}var W=function(e){var t=Math.random()*e;return t=Math.floor(t)},X=function(e,t,n){var a=new Array(Math.pow(e,2)/n).fill(!0),r=[];return a.forEach(function(){var e=W(t.length);r.push(t[e])}),r},K=function(e,t){return e.map(function(e){return{source:"breedRandom",exactly:e,amount:t}})},Q=function(e){return e.flatMap(function(e){return e.message.map(function(t){return{breed:e.exactly,image:t}})})},Y=function(e){var t=e;if(void 0!==e){for(var n=0;n<t.length;n+=1){var a=t[n],r=W(t.length);t[n]=t[r],t[r]=a}for(var c=0;c<t.length;c+=1)t[c].id=c,t[c].isActive=!0}return t};function Z(e){return fetch(e).then(function(e){return 200!==e.status&&Promise.reject(new Error(e.statusText)),Promise.resolve(e.json())})}var $=function(e){return{type:"GET_DOGS_LOADING",query:e}},ee=function(e,t){return{type:"GET_DOGS_SUCCESS",query:e,result:t}},te=function(e){return{type:"GET_DOGS_FAIL",error:e}};function ne(e){return function(t){return t($(e)),Z(V(e)).then(function(n){return t(ee(e,n.message))}).catch(function(e){return console.log("err",e),t(te(e))})}}var ae=function(){return function(){var e=Object(J.a)(q.a.mark(function e(t,n){var a,r,c,o,i,s,l,u,p,f;return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n(),r=a.dogs.list,c=a.game,o=c.size,i=c.complexity,0!==Object.keys(r).length){e.next=6;break}return e.next=6,t(ne({source:"list",exactly:"",amount:null})).then(function(){a=n(),r=Object(m.a)({},a.dogs.list)});case 6:return t({type:"CREATE_NEW_GAME"}),s=X(o,Object.keys(r),i),l=K(s,i),u=l.map(function(e){return V(e)}),e.prev=10,e.next=13,Promise.all(u.map(function(e){return Z(e).then(function(e){return e}).catch(function(e){console.log("error",e)})}));case 13:e.sent.forEach(function(e,t){Object.assign(l[t],e)}),p=Q(l),f=Y(p),t(T(f)),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(10),t({type:"CREATE_GAME_FAIL",error:e.t0});case 23:case"end":return e.stop()}},e,this,[[10,20]])}));return function(t,n){return e.apply(this,arguments)}}()},re=function(e,t){return function(n){if(0===t.selectedDogs.length)return n(z([e],[],t.score));var a=t.selectedDogs[0];if(e.breed!==a.breed||0!==t.selectedDogs.filter(function(t){return t.id===e.id}).length)return n(z([],[],t.score));var r=t.selectedDogs.length+1<t.complexity,c=t.selectedDogs.concat(e),o=r?c:[],i=r?[]:c,s=0;0!==i.length&&i.forEach(function(e,n){i[n].isActive=!1,s=t.complexity});var l=t.score+s;return n(0===t.source.filter(function(e){return e.isActive}).length?{type:"FINISH_GAME",score:l}:z(o,i,l))}},ce=function(e){function t(){return Object(G.a)(this,t),Object(S.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return r.a.createElement(B,this.props)}}]),t}(a.Component),oe={createGame:function(){return function(e){return e(ae())}},selectDog:function(e){return function(t,n){var a=n().game;t(re(e,a))}},fetchDogsList:function(e){return function(t){return t(ne(e))}}},ie=Object(_.b)(function(e){return{list:e.dogs.list,size:e.game.size,complexity:e.game.complexity,score:e.game.score,source:e.game.source,selectedDogs:e.game.selectedDogs}},oe)(ce),se=function(){return r.a.createElement(N.a,null,r.a.createElement(O.a,{path:"/game",exact:!0,component:ie}),r.a.createElement(O.a,{path:"/settings",component:P}),r.a.createElement(O.a,{path:"/",exact:!0,component:x}))},le=(n(59),n(62));function ue(e){var t=e.links.map(function(e){return r.a.createElement("li",{className:"NavigationPanel__item",key:"".concat(e.path)},r.a.createElement(le.a,{className:"NavigationPanel__link",to:e.path},e.name))});return r.a.createElement("nav",{className:"NavigationPanel"},r.a.createElement("ul",{className:"NavigationPanel__list"},t))}var me=n(32);function pe(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App__header"},r.a.createElement(ue,{links:me.a})),r.a.createElement("main",{className:"App__main"},r.a.createElement(se,null)),r.a.createElement("footer",{className:"App__footer"}))}var fe=function(e){var t=e.store;return r.a.createElement(_.a,{store:t},r.a.createElement(y.a,{basename:"/DogExpert"},r.a.createElement(O.a,{path:"/",component:pe})))},ge=Object(i.d)(b,Object(i.a)(s.a,u.a));o.a.render(r.a.createElement(fe,{store:ge}),document.getElementById("root"));t.default=ge}},[[33,2,1]]]);
//# sourceMappingURL=main.6e2856d9.chunk.js.map